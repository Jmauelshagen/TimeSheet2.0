@using Timesheet.Models
@model Timesheet.Models.TimeSheet
@{
    Layout = null;
}
<!--This screen renders after someone with the HR role logs in. It displays a menu for week ending date.
    After selection is submitted, a summary of hours worked by each employee that logged time that week
    is displayed.-->

<!DOCTYPE html>
<link rel="stylesheet" href="~/Content/Style.css" type="text/css" />

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Pay Sheet Summaries</title>
</head>

<body>
    <!--Get employee and pay summary objects from the session.-->
    @{var emp = (Employee)Session["Employee"];
        var paySumList = (List<PaySummary>)Session["PaySummaryList"];
    }
    <div>
        <img src="~/Content/ChatLogo.jpg" alt="ChatLogo" height="250" width="1520" />
    </div>
    <div>
        <h1>Pay Sheet Summaries</h1>
        <!--Display HR person's first and last name-->
        <p>Welcome @emp.FirstName @emp.LastName!</p>

        <br />
        <p>Select a week to review employee pay sheet summaries.</p>
        <!--Form for selecting a week and viewing pay summaries-->
        @using (Html.BeginForm("GetPayData", "HR", FormMethod.Post, new { role = "form" }))
    {
        @Html.LabelFor(m => m.WeekEnding)
        @Html.DropDownListFor(m => m.WeekEnding,
                    Model.WeekEndingDates,
                    " - Please select a date - ",
                    new { @class = "form-control" })
        <button type="submit">Search</button>
}
        <br />

        <!--Table to display pay summaries from the session-->
        <table style="width:100%" cellpadding="4">

            <tr>
                <th>Employee Name</th>
                <th>Total Hours</th>
                <th>Over Time</th>
                <th>Time Sheet Status</th>
                <th>Supervisor</th>
            </tr>
            @{
            if (@paySumList != null)
            {
                foreach (PaySummary paySum in @paySumList)
                {
                    <tr>
                        <td>
                            @paySum.EmpName
                        </td>
                        <td>
                            @paySum.TotalHours
                        </td>
                        <td>
                            @paySum.OverTimeHours
                        </td>
                        <td>
                            @paySum.TimeSheetStatus
                        </td>
                        <td>
                            @paySum.SuperName
                        </td>
                    </tr>
            }

        }

            }
        </table>

        <br />

        <!--Email form (html)-->
        <p> Email an employee: </p>
        @using (Html.BeginForm("email", "HR", FormMethod.Post))
        {
            <div>
                <form name="sentMessage" id="contactForm" novalidate>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <input type="email" name="empemail" class="form-control" placeholder="Employee Email *" id="email" required data-validation-required-message="Please enter your email address.">
                                <p></p>
                                <input type="text" name="empsub" class="form-control" placeholder="Subject: *" id="name" required data-validation-required-message="Please enter your name.">
                                <p></p>
                                <textarea class="form-control" name="smessage" placeholder="Your Message *" id="message" required data-validation-required-message="Please enter a message."></textarea>
                                <p></p>
                            </div>
                        </div>
                        <div class="clearfix"></div>
                        <div class="col-lg-12 text-center">
                            <div id="success"></div>
                         <button type="submit" class="submit button" onclick="this.form.submit();">Send Message</button>
                        </div>
                    </div>
                </form>
            </div>
        }
        <br />

    </div>
    <!--Log out link-->
    <a href="@Url.Action("LogOut", "Login")">LogOut</a>
</body>
</html>